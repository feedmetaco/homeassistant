type: sections
title: "High level "
icon: mdi:binoculars
theme: ios-dark-mode-dark-blue
cards: []
background:
  opacity: 33
  alignment: center
  size: cover
  repeat: repeat
  attachment: fixed
sections:
  - type: grid
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            variables:
              tile_h: 130
              pad_px: 10
              row_gap_px: 4
              icon_px: 48
              name_font_px: 20
              ok: "#6AFF00"
              warn: "#FFC107"
              alert: "#FF5252"
              ink: "#B7C0C8"
              info: deepskyblue
            entity: sensor.zz_pwr_pdu_ac_power_consumption
            name: UniFi PDU
            icon: mdi:power-socket-us
            show_state: false
            tap_action:
              action: more-info
              entity: update.zz_pwr_pdu
            hold_action:
              action: call-service
              service: button.press
              target:
                entity_id: button.zz_pwr_pdu_restart
              confirmation:
                text: Restart UniFi PDU now?
            triggers_update:
              - sensor.zz_pwr_pdu_ac_power_consumption
              - sensor.zz_pwr_pdu_ac_power_budget
              - sensor.zz_pwr_pdu_state
              - sensor.zz_pwr_pdu_uptime
              - sensor.zz_pwr_pdu_clients
              - update.zz_pwr_pdu
            styles:
              card:
                - height: "[[[ return variables.tile_h + 'px'; ]]]"
                - padding: "[[[ return variables.pad_px + 'px'; ]]]"
                - border-radius: 14px
                - background: >
                    linear-gradient(135deg, #0f1318 0%, #151b22 60%, #0f1318
                    100%)
                - border: 1px solid rgba(106,255,0,0.18)
                - box-shadow: 0 0 0 1px rgba(106,255,0,0.08), 0 12px 24px rgba(0,0,0,0.35)
                - color: "#E8F0F5"
                - text-shadow: 0 0 4px rgba(0,0,0,.6)
                - font-weight: 500
                - animation: |
                    [[[
                      const s = (states['sensor.zz_pwr_pdu_state']?.state || '').toLowerCase();
                      const bud = Number(states['sensor.zz_pwr_pdu_ac_power_budget']?.state);
                      const use = Number(states['sensor.zz_pwr_pdu_ac_power_consumption']?.state);
                      const pct = (isNaN(bud)||bud<=0) ? 0 : Math.round((use/bud)*100);
                      const bad = !s || (s !== 'connected' && s !== 'online' && s !== 'up') || pct >= 90;
                      return bad ? 'blink 1.2s steps(2, start) infinite' : 'none';
                    ]]]
              grid:
                - grid-template-areas: |
                    "i status"
                    "n n"
                    "power power"
                    "meta meta"
                - grid-template-columns: 1fr 1fr
                - grid-template-rows: auto min-content min-content min-content
                - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
              name:
                - justify-self: center
                - align-self: center
                - margin-top: "-2px"
                - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
                - font-weight: 900
                - color: White
                - letter-spacing: 0.3px
              img_cell:
                - justify-content: left
                - align-items: center
                - margin: 0
              icon:
                - width: "[[[ return (variables.icon_px || 48) + 'px'; ]]]"
                - height: "[[[ return (variables.icon_px || 48) + 'px'; ]]]"
                - margin-top: 0
                - color: |
                    [[[
                      const s = (states['sensor.zz_pwr_pdu_state']?.state || '').toLowerCase();
                      if (s === 'connected' || s === 'online' || s === 'up') return variables.ok;
                      if (s === 'updating') return variables.warn;
                      return variables.alert;
                    ]]]
                - filter: drop-shadow(0 0 8px rgba(106,255,0,.25))
              custom_fields:
                status:
                  - justify-self: end
                  - align-self: start
                  - font-size: 11px
                  - text-align: right
                power:
                  - justify-self: center
                  - align-self: center
                  - font-size: 12px
                  - font-weight: 600
                  - width: 100%
                meta:
                  - justify-self: stretch
                  - align-self: end
                  - font-size: 11px
                  - color: "[[[ return variables.ink; ]]]"
            custom_fields:
              status: |
                [[[
                  const s = (states['sensor.zz_pwr_pdu_state']?.state || 'unknown').toUpperCase();
                  const up = (states['update.zz_pwr_pdu']?.state || 'off') === 'on';
                  const ok  = ['CONNECTED','ONLINE','UP'].includes(s);
                  const c1  = ok ? variables.ok : variables.alert;
                  const t1  = ok ? 'CONNECTED' : (s || 'UNKNOWN');
                  const c2  = up ? variables.warn : variables.ok;
                  const t2  = up ? 'UPDATE' : 'UP-TO-DATE';
                  const pill = (text,color)=>`
                    <span style="
                      display:inline-block;padding:2px 8px;margin-left:6px;
                      border:1px solid ${color}55;border-radius:999px;
                      color:${color};background:rgba(255,255,255,0.03);font-weight:700;">
                      ${text}
                    </span>`;
                  return pill(t1,c1) + pill(t2,c2);
                ]]]
              power: |
                [[[
                  const use = Number(states['sensor.zz_pwr_pdu_ac_power_consumption']?.state);
                  const bud = Number(states['sensor.zz_pwr_pdu_ac_power_budget']?.state);
                  if (isNaN(use) || isNaN(bud) || bud <= 0) {
                    return `<div style="opacity:.6">Power: -- / --</div>
                            <div style="height:10px;border-radius:6px;background:#2a2f36;margin-top:4px;"></div>`;
                  }
                  const pct = Math.min(100, Math.round((use/bud)*100));
                  let col = variables.ok;
                  if (pct >= 90) col = variables.alert;
                  else if (pct >= 75) col = variables.warn;

                  return `
                    <div style="display:flex;justify-content:space-between;width:100%;">
                      <span>Power</span><span>${Math.round(use)}W / ${Math.round(bud)}W (${pct}%)</span>
                    </div>
                    <div style="height:10px;border-radius:6px;background:#2a2f36;margin-top:4px;overflow:hidden;">
                      <div style="
                        height:100%;width:${pct}%;
                        background:linear-gradient(90deg, ${col} 0%, rgba(255,255,255,.85) 200%);
                        filter: drop-shadow(0 0 6px ${col}55);
                        transition: width .3s ease;"></div>
                    </div>`;
                ]]]
              meta: |
                [[[
                  // count outlets 5..20
                  let on=0, tot=0;
                  for (let i=5;i<=20;i++){
                    const s=states[`switch.zz_pwr_pdu_outlet_${i}`]?.state;
                    if (s !== undefined){ tot++; if (s==='on') on++; }
                  }
                  // usb 1..4
                  let usbOn=0, usbTot=0;
                  for (let i=1;i<=4;i++){
                    const s=states[`switch.zz_pwr_pdu_usb_outlet_${i}`]?.state;
                    if (s !== undefined){ usbTot++; if (s==='on') usbOn++; }
                  }
                  const up = states['sensor.zz_pwr_pdu_uptime']?.state || '-';
                  const cl = states['sensor.zz_pwr_pdu_clients']?.state || '-';

                  const chip=(ic,txt)=>`
                    <span style="display:inline-flex;align-items:center;gap:6px;margin-right:10px;">
                      <ha-icon icon="${ic}" style="width:12px;height:12px;color:${variables.info};"></ha-icon>
                      <span>${txt}</span>
                    </span>`;

                  return chip('mdi:power-plug','Outlets ' + on+'/'+tot) + 
                         chip('mdi:usb','USB ' + usbOn+'/'+usbTot) + 
                         chip('mdi:clock-outline','Uptime ' + up) + 
                         chip('mdi:account-multiple','Clients ' + cl);
                ]]]
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 16
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "1"
                entity: switch.zz_pwr_pdu_usb_outlet_1
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_usb_outlet_1
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                        return currentState === 'on' ? 'Turn OFF USB outlet 1?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_usb_outlet_1
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                          if (outletState === 'on') {
                            // USB ON STATE COLORS - Blue theme for USB outlets
                            return 'radial-gradient(circle at center, #1e3a8a 0%, #1e40af 50%, #1d4ed8 100%)';
                          }
                          // USB OFF STATE COLORS - Darker theme for OFF state  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                          if (outletState === 'on') return '2px solid #3b82f6';  // USB ON BORDER - Blue theme
                          return '1px solid #4b5563';  // USB OFF BORDER - Gray theme
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                          if (outletState === 'on') {
                            // USB ON GLOW - Blue glow for USB outlets
                            return '0 0 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // USB OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: "-5px"
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 15px
                      - margin-left: 0px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                      - margin-bottom: 1px
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                      const plugColor = outletState === 'on' ? '#3b82f6' : '#9ca3af';  // Blue when ON
                      
                      // USB PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:usb-port" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:usb-port" to different USB icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                      const iconColor = outletState === 'on' ? '#60a5fa' : '#9ca3af';  // USB ICON COLORS - Light blue
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // USB TEXT COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #60a5fa);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:usb" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:16px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">USB1</span>
                      </div>`;
                      // USB ICON SIZE: Change width/height (20-32px recommended)
                      // USB TEXT SIZE: Change font-size (12-20px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                      // USB LABEL: Change "USB1" to customize text
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_1']?.state;
                      
                      let statusText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#3b82f6;font-size:11px;font-weight:600;">● ON</span>';   // USB ON STATUS - Blue theme
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // USB OFF STATUS
                      }
                      
                      return `<div style="display:flex;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // STATUS COLORS: Change #3b82f6 (USB ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 16
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "3"
                entity: switch.zz_pwr_pdu_usb_outlet_3
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_usb_outlet_3
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                        return currentState === 'on' ? 'Turn OFF USB outlet 3?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_usb_outlet_3
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                          if (outletState === 'on') {
                            // USB ON STATE COLORS - Blue theme for USB outlets
                            return 'radial-gradient(circle at center, #1e3a8a 0%, #1e40af 50%, #1d4ed8 100%)';
                          }
                          // USB OFF STATE COLORS - Darker theme for OFF state  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                          if (outletState === 'on') return '2px solid #3b82f6';  // USB ON BORDER - Blue theme
                          return '1px solid #4b5563';  // USB OFF BORDER - Gray theme
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                          if (outletState === 'on') {
                            // USB ON GLOW - Blue glow for USB outlets
                            return '0 0 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // USB OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                      const plugColor = outletState === 'on' ? '#3b82f6' : '#9ca3af';  // Blue when ON
                      
                      // USB PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:usb-port" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:usb-port" to different USB icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                      const iconColor = outletState === 'on' ? '#60a5fa' : '#9ca3af';  // USB ICON COLORS - Light blue
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // USB TEXT COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #60a5fa);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:usb" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:16px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">USB3</span>
                      </div>`;
                      // USB ICON SIZE: Change width/height (20-32px recommended)
                      // USB TEXT SIZE: Change font-size (12-20px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                      // USB LABEL: Change "USB3" to customize text
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_3']?.state;
                      
                      let statusText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#3b82f6;font-size:11px;font-weight:600;">● ON</span>';   // USB ON STATUS - Blue theme
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // USB OFF STATUS
                      }
                      
                      return `<div style="display:flex;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // STATUS COLORS: Change #3b82f6 (USB ON) and #ef4444 (OFF)
                    ]]]
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 16
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "2"
                entity: switch.zz_pwr_pdu_usb_outlet_2
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_usb_outlet_2
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                        return currentState === 'on' ? 'Turn OFF USB outlet 2?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_usb_outlet_2
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                          if (outletState === 'on') {
                            // USB ON STATE COLORS - Blue theme for USB outlets
                            return 'radial-gradient(circle at center, #1e3a8a 0%, #1e40af 50%, #1d4ed8 100%)';
                          }
                          // USB OFF STATE COLORS - Darker theme for OFF state  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                          if (outletState === 'on') return '2px solid #3b82f6';  // USB ON BORDER - Blue theme
                          return '1px solid #4b5563';  // USB OFF BORDER - Gray theme
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                          if (outletState === 'on') {
                            // USB ON GLOW - Blue glow for USB outlets
                            return '0 0 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // USB OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                      const plugColor = outletState === 'on' ? '#3b82f6' : '#9ca3af';  // Blue when ON
                      
                      // USB PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:usb-port" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:usb-port" to different USB icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                      const iconColor = outletState === 'on' ? '#60a5fa' : '#9ca3af';  // USB ICON COLORS - Light blue
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // USB TEXT COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #60a5fa);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:usb" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:16px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">USB2</span>
                      </div>`;
                      // USB ICON SIZE: Change width/height (20-32px recommended)
                      // USB TEXT SIZE: Change font-size (12-20px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                      // USB LABEL: Change "USB2" to customize text
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_2']?.state;
                      
                      let statusText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#3b82f6;font-size:11px;font-weight:600;">● ON</span>';   // USB ON STATUS - Blue theme
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // USB OFF STATUS
                      }
                      
                      return `<div style="display:flex;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // STATUS COLORS: Change #3b82f6 (USB ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 16
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "4"
                entity: switch.zz_pwr_pdu_usb_outlet_4
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_usb_outlet_4
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                        return currentState === 'on' ? 'Turn OFF USB outlet 4?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_usb_outlet_4
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                          if (outletState === 'on') {
                            // USB ON STATE COLORS - Blue theme for USB outlets
                            return 'radial-gradient(circle at center, #1e3a8a 0%, #1e40af 50%, #1d4ed8 100%)';
                          }
                          // USB OFF STATE COLORS - Darker theme for OFF state  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                          if (outletState === 'on') return '2px solid #3b82f6';  // USB ON BORDER - Blue theme
                          return '1px solid #4b5563';  // USB OFF BORDER - Gray theme
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                          if (outletState === 'on') {
                            // USB ON GLOW - Blue glow for USB outlets
                            return '0 0 20px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // USB OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                      const plugColor = outletState === 'on' ? '#3b82f6' : '#9ca3af';  // Blue when ON
                      
                      // USB PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:usb-port" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:usb-port" to different USB icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                      const iconColor = outletState === 'on' ? '#60a5fa' : '#9ca3af';  // USB ICON COLORS - Light blue
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // USB TEXT COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #60a5fa);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:usb" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:16px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">USB4</span>
                      </div>`;
                      // USB ICON SIZE: Change width/height (20-32px recommended)
                      // USB TEXT SIZE: Change font-size (12-20px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                      // USB LABEL: Change "USB4" to customize text
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_usb_outlet_4']?.state;
                      
                      let statusText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#3b82f6;font-size:11px;font-weight:600;">● ON</span>';   // USB ON STATUS - Blue theme
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // USB OFF STATUS
                      }
                      
                      return `<div style="display:flex;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // STATUS COLORS: Change #3b82f6 (USB ON) and #ef4444 (OFF)
                    ]]]
        grid_options:
          columns: full
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:button-card
                variables:
                  tile_h: 85
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "5"
                  device_name: ""
                entity: switch.zz_pwr_pdu_outlet_5
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_5
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 5?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_5
                  - sensor.zz_pwr_pdu_outlet_5_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_5_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">5</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_5']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_5_outlet_power']?.state;
                      const powerNum = Number(power);
                      const deviceName = variables.device_name || "";  // Get device name from variables
                      
                      let statusText, powerText, deviceText = "";
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      // DEVICE NAME STYLING - Show device name if provided
                      if (deviceName && deviceName.trim() !== "") {
                        deviceText = `<div style="margin-bottom:2px;"><span style="color:#d1d5db;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;">${deviceName}</span></div>`;
                      }
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.2;">
                        ${deviceText}
                        <div style="display:flex;gap:8px;align-items:center;justify-content:center;">
                          ${statusText}
                          ${powerText}
                        </div>
                      </div>`;
                      // DEVICE NAME: Set in variables.device_name (leave empty "" to hide)
                      // DEVICE STYLING: Change color #d1d5db, font-size 10px for device name
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 85
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "9"
                  device_name: Unvr
                entity: switch.zz_pwr_pdu_outlet_9
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_9
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 9?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_9
                  - sensor.zz_pwr_pdu_outlet_9_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_9_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">9</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_9']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_9_outlet_power']?.state;
                      const powerNum = Number(power);
                      const deviceName = variables.device_name || "";  // Get device name from variables
                      
                      let statusText, powerText, deviceText = "";
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      // DEVICE NAME STYLING - Show device name if provided
                      if (deviceName && deviceName.trim() !== "") {
                        deviceText = `<div style="margin-bottom:2px;"><span style="color:#d1d5db;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;">${deviceName}</span></div>`;
                      }
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.2;">
                        ${deviceText}
                        <div style="display:flex;gap:8px;align-items:center;justify-content:center;">
                          ${statusText}
                          ${powerText}
                        </div>
                      </div>`;
                      // DEVICE NAME: Set in variables.device_name (leave empty "" to hide)
                      // DEVICE STYLING: Change color #d1d5db, font-size 10px for device name
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "13"
                entity: switch.zz_pwr_pdu_outlet_13
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_13
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 13?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_13
                  - sensor.zz_pwr_pdu_outlet_13_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_13_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">13</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_13']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_13_outlet_power']?.state;
                      const powerNum = Number(power);
                      
                      let statusText, powerText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      return `<div style="display:flex;gap:8px;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                        ${powerText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "17"
                entity: switch.zz_pwr_pdu_outlet_17
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_17
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 17?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_17
                  - sensor.zz_pwr_pdu_outlet_17_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_17_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">17</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_17']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_17_outlet_power']?.state;
                      const powerNum = Number(power);
                      
                      let statusText, powerText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      return `<div style="display:flex;gap:8px;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                        ${powerText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                variables:
                  tile_h: 85
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "6"
                  device_name: UAG
                entity: switch.zz_pwr_pdu_outlet_6
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_6
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 6?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_6
                  - sensor.zz_pwr_pdu_outlet_6_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_6_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">6</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_6']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_6_outlet_power']?.state;
                      const powerNum = Number(power);
                      const deviceName = variables.device_name || "";  // Get device name from variables
                      
                      let statusText, powerText, deviceText = "";
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      // DEVICE NAME STYLING - Show device name if provided
                      if (deviceName && deviceName.trim() !== "") {
                        deviceText = `<div style="margin-bottom:2px;"><span style="color:#d1d5db;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;">${deviceName}</span></div>`;
                      }
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.2;">
                        ${deviceText}
                        <div style="display:flex;gap:8px;align-items:center;justify-content:center;">
                          ${statusText}
                          ${powerText}
                        </div>
                      </div>`;
                      // DEVICE NAME: Set in variables.device_name (leave empty "" to hide)
                      // DEVICE STYLING: Change color #d1d5db, font-size 10px for device name
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 85
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "10"
                  device_name: synology
                entity: switch.zz_pwr_pdu_outlet_10
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_10
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 10?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_10
                  - sensor.zz_pwr_pdu_outlet_10_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_10_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">10</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_10']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_10_outlet_power']?.state;
                      const powerNum = Number(power);
                      const deviceName = variables.device_name || "";  // Get device name from variables
                      
                      let statusText, powerText, deviceText = "";
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      // DEVICE NAME STYLING - Show device name if provided
                      if (deviceName && deviceName.trim() !== "") {
                        deviceText = `<div style="margin-bottom:2px;"><span style="color:#d1d5db;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;">${deviceName}</span></div>`;
                      }
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.2;">
                        ${deviceText}
                        <div style="display:flex;gap:8px;align-items:center;justify-content:center;">
                          ${statusText}
                          ${powerText}
                        </div>
                      </div>`;
                      // DEVICE NAME: Set in variables.device_name (leave empty "" to hide)
                      // DEVICE STYLING: Change color #d1d5db, font-size 10px for device name
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "14"
                entity: switch.zz_pwr_pdu_outlet_14
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_14
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 14?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_14
                  - sensor.zz_pwr_pdu_outlet_14_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_14_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">14</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_14']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_14_outlet_power']?.state;
                      const powerNum = Number(power);
                      
                      let statusText, powerText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      return `<div style="display:flex;gap:8px;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                        ${powerText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "18"
                entity: switch.zz_pwr_pdu_outlet_18
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_18
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 18?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_18
                  - sensor.zz_pwr_pdu_outlet_18_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_18_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">18</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_18']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_18_outlet_power']?.state;
                      const powerNum = Number(power);
                      
                      let statusText, powerText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      return `<div style="display:flex;gap:8px;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                        ${powerText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                variables:
                  tile_h: 85
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "7"
                  device_name: Core Switch
                entity: switch.zz_pwr_pdu_outlet_7
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_7
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 7?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_7
                  - sensor.zz_pwr_pdu_outlet_7_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_7_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">7</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_7']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_7_outlet_power']?.state;
                      const powerNum = Number(power);
                      const deviceName = variables.device_name || "";  // Get device name from variables
                      
                      let statusText, powerText, deviceText = "";
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      // DEVICE NAME STYLING - Show device name if provided
                      if (deviceName && deviceName.trim() !== "") {
                        deviceText = `<div style="margin-bottom:2px;"><span style="color:#d1d5db;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;">${deviceName}</span></div>`;
                      }
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.2;">
                        ${deviceText}
                        <div style="display:flex;gap:8px;align-items:center;justify-content:center;">
                          ${statusText}
                          ${powerText}
                        </div>
                      </div>`;
                      // DEVICE NAME: Set in variables.device_name (leave empty "" to hide)
                      // DEVICE STYLING: Change color #d1d5db, font-size 10px for device name
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 85
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "11"
                  device_name: ISP-Router
                entity: switch.zz_pwr_pdu_outlet_11
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_11
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 11?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_11
                  - sensor.zz_pwr_pdu_outlet_11_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_11_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">11</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_11']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_11_outlet_power']?.state;
                      const powerNum = Number(power);
                      const deviceName = variables.device_name || "";  // Get device name from variables
                      
                      let statusText, powerText, deviceText = "";
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      // DEVICE NAME STYLING - Show device name if provided
                      if (deviceName && deviceName.trim() !== "") {
                        deviceText = `<div style="margin-bottom:2px;"><span style="color:#d1d5db;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;">${deviceName}</span></div>`;
                      }
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.2;">
                        ${deviceText}
                        <div style="display:flex;gap:8px;align-items:center;justify-content:center;">
                          ${statusText}
                          ${powerText}
                        </div>
                      </div>`;
                      // DEVICE NAME: Set in variables.device_name (leave empty "" to hide)
                      // DEVICE STYLING: Change color #d1d5db, font-size 10px for device name
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "15"
                entity: switch.zz_pwr_pdu_outlet_15
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_15
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 15?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_15
                  - sensor.zz_pwr_pdu_outlet_15_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_15_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">15</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_15']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_15_outlet_power']?.state;
                      const powerNum = Number(power);
                      
                      let statusText, powerText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      return `<div style="display:flex;gap:8px;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                        ${powerText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "19"
                entity: switch.zz_pwr_pdu_outlet_19
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_19
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 19?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_19
                  - sensor.zz_pwr_pdu_outlet_19_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_19_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">19</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_19']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_19_outlet_power']?.state;
                      const powerNum = Number(power);
                      
                      let statusText, powerText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      return `<div style="display:flex;gap:8px;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                        ${powerText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
          - type: vertical-stack
            cards:
              - type: custom:button-card
                variables:
                  tile_h: 85
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "8"
                  device_name: Backup UDMP
                entity: switch.zz_pwr_pdu_outlet_8
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_8
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 8?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_8
                  - sensor.zz_pwr_pdu_outlet_8_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_8_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">8</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_8']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_8_outlet_power']?.state;
                      const powerNum = Number(power);
                      const deviceName = variables.device_name || "";  // Get device name from variables
                      
                      let statusText, powerText, deviceText = "";
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      // DEVICE NAME STYLING - Show device name if provided
                      if (deviceName && deviceName.trim() !== "") {
                        deviceText = `<div style="margin-bottom:2px;"><span style="color:#d1d5db;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;">${deviceName}</span></div>`;
                      }
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.2;">
                        ${deviceText}
                        <div style="display:flex;gap:8px;align-items:center;justify-content:center;">
                          ${statusText}
                          ${powerText}
                        </div>
                      </div>`;
                      // DEVICE NAME: Set in variables.device_name (leave empty "" to hide)
                      // DEVICE STYLING: Change color #d1d5db, font-size 10px for device name
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 85
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "12"
                  device_name: UDMP-SE
                entity: switch.zz_pwr_pdu_outlet_12
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_12
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 12?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_12
                  - sensor.zz_pwr_pdu_outlet_12_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_12_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">12</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_12']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_12_outlet_power']?.state;
                      const powerNum = Number(power);
                      const deviceName = variables.device_name || "";  // Get device name from variables
                      
                      let statusText, powerText, deviceText = "";
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      // DEVICE NAME STYLING - Show device name if provided
                      if (deviceName && deviceName.trim() !== "") {
                        deviceText = `<div style="margin-bottom:2px;"><span style="color:#d1d5db;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px;">${deviceName}</span></div>`;
                      }
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.2;">
                        ${deviceText}
                        <div style="display:flex;gap:8px;align-items:center;justify-content:center;">
                          ${statusText}
                          ${powerText}
                        </div>
                      </div>`;
                      // DEVICE NAME: Set in variables.device_name (leave empty "" to hide)
                      // DEVICE STYLING: Change color #d1d5db, font-size 10px for device name
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "16"
                entity: switch.zz_pwr_pdu_outlet_16
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_16
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 16?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_16
                  - sensor.zz_pwr_pdu_outlet_16_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_16_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">16</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_16']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_16_outlet_power']?.state;
                      const powerNum = Number(power);
                      
                      let statusText, powerText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      return `<div style="display:flex;gap:8px;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                        ${powerText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
              - type: custom:button-card
                variables:
                  tile_h: 80
                  font_px: 12
                  name_font_px: 18
                  icon_pct: 50
                  pad_px: 6
                  row_gap_px: 3
                  outlet_number: "20"
                entity: switch.zz_pwr_pdu_outlet_20
                name: ""
                icon: ""
                show_state: false
                show_name: false
                show_icon: false
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const currentState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                      return currentState === 'on' ? 'switch.turn_off' : 'switch.turn_on';
                    ]]]
                  target:
                    entity_id: switch.zz_pwr_pdu_outlet_20
                  confirmation:
                    text: |
                      [[[
                        const currentState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                        return currentState === 'on' ? 'Turn OFF outlet 20?' : null;
                      ]]]
                hold_action:
                  action: more-info
                triggers_update:
                  - switch.zz_pwr_pdu_outlet_20
                  - sensor.zz_pwr_pdu_outlet_20_outlet_power
                styles:
                  card:
                    - height: "[[[ return variables.tile_h + \"px\"; ]]]"
                    - padding: "[[[ return variables.pad_px + \"px\"; ]]]"
                    - background: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                          if (outletState === 'on') {
                            // ON STATE COLORS - Change these hex values for different ON appearance
                            return 'radial-gradient(circle at center, #065f46 0%, #064e3b 50%, #052e16 100%)';
                          }
                          // OFF STATE COLORS - Change these hex values for different OFF appearance  
                          return 'radial-gradient(circle at center, #374151 0%, #1f2937 50%, #111827 100%)';
                        ]]]
                    - border: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                          if (outletState === 'on') return '2px solid #10b981';  // ON BORDER - Change color/thickness
                          return '1px solid #4b5563';  // OFF BORDER - Change color/thickness
                        ]]]
                    - box-shadow: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                          if (outletState === 'on') {
                            // ON GLOW - Adjust glow intensity and color (0-50px blur, 0-1 opacity)
                            return '0 0 20px rgba(16, 185, 129, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)';
                          }
                          // OFF SHADOW - Standard shadow for OFF state
                          return '0 4px 8px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05)';
                        ]]]
                    - border-radius: 12px
                    - color: ivory
                    - font-size: "[[[ return variables.font_px + \"px\"; ]]]"
                    - text-shadow: 0px 0px 8px rgba(0,0,0,0.8)
                    - cursor: pointer
                    - transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)
                    - transform: |
                        [[[
                          const outletState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                          return outletState === 'on' ? 'scale(1.02)' : 'scale(1)';  // Change 1.02 to adjust scale (1.01-1.05)
                        ]]]
                  grid:
                    - grid-template-areas: |
                        "plug center"
                        "bottom bottom"
                    - grid-template-columns: auto 1fr
                    - grid-template-rows: 1fr auto
                    - gap: 4px
                  custom_fields:
                    plug:
                      - justify-self: start
                      - align-self: start
                      - margin-top: 4px
                      - margin-left: 4px
                    center:
                      - justify-self: center
                      - align-self: center
                      - text-align: center
                    bottom:
                      - justify-self: center
                      - align-self: end
                      - text-align: center
                      - margin-bottom: 4px
                      - "--text-color-power": |
                          [[[
                            const power = Number(states['sensor.zz_pwr_pdu_outlet_20_outlet_power']?.state);
                            if (isNaN(power) || power === 0) return '#9ca3af';  // NO POWER COLOR
                            if (power < 50) return 'lime';     // LOW POWER COLOR (0-50W)
                            if (power < 100) return 'yellow';  // MEDIUM POWER COLOR (50-100W)
                            if (power < 150) return 'orange';  // HIGH POWER COLOR (100-150W)
                            return 'red';                      // VERY HIGH POWER COLOR (150W+)
                          ]]]
                custom_fields:
                  plug: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                      const plugColor = outletState === 'on' ? 'lime' : '#9ca3af';
                      
                      // PLUG ICON - Change icon and size here
                      return `<ha-icon icon="mdi:power-socket-us" style="width:16px;height:16px;color:${plugColor};"></ha-icon>`;
                      // ICON SIZE: Change width/height (12-24px recommended)
                      // ICON TYPE: Change "mdi:power-socket-us" to different icon
                    ]]]
                  center: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                      const iconColor = outletState === 'on' ? '#fbbf24' : '#9ca3af';  // LIGHTNING BOLT COLORS
                      const textColor = outletState === 'on' ? 'white' : '#9ca3af';    // OUTLET NUMBER COLORS
                      const glowEffect = outletState === 'on' ? 'filter: drop-shadow(0 0 6px #fbbf24);' : '';
                      
                      return `<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;height:100%;">
                        <ha-icon icon="mdi:lightning-bolt" style="width:24px;height:24px;color:${iconColor};${glowEffect}"></ha-icon>
                        <span style="color:${textColor};font-size:18px;font-weight:bold;text-shadow: 0px 0px 4px currentColor;">20</span>
                      </div>`;
                      // LIGHTNING BOLT SIZE: Change width/height (20-32px recommended)
                      // OUTLET NUMBER SIZE: Change font-size (14-24px recommended)  
                      // GLOW INTENSITY: Adjust drop-shadow blur (0-12px)
                      // SPACING: Change gap (0-6px)
                    ]]]
                  bottom: |
                    [[[
                      const outletState = states['switch.zz_pwr_pdu_outlet_20']?.state;
                      const power = states['sensor.zz_pwr_pdu_outlet_20_outlet_power']?.state;
                      const powerNum = Number(power);
                      
                      let statusText, powerText;
                      
                      if (outletState === 'on') {
                        statusText = '<span style="color:#22c55e;font-size:11px;font-weight:600;">● ON</span>';   // ON STATUS STYLING
                      } else {
                        statusText = '<span style="color:#ef4444;font-size:11px;font-weight:600;">● OFF</span>';  // OFF STATUS STYLING
                      }
                      
                      if (isNaN(powerNum)) {
                        powerText = '<span style="color:#9ca3af;font-size:11px;font-weight:600;">0W</span>';      // NO POWER STYLING
                      } else {
                        const powerVal = Math.round(powerNum);
                        powerText = `<span style="color: var(--text-color-power);font-size:11px;font-weight:600;">${powerVal}W</span>`;  // POWER STYLING
                      }
                      
                      return `<div style="display:flex;gap:8px;align-items:center;justify-content:center;line-height:1.2;">
                        ${statusText}
                        ${powerText}
                      </div>`;
                      // BOTTOM TEXT SIZE: Change font-size (9-14px recommended)
                      // TEXT SPACING: Change gap (4-12px)
                      // STATUS COLORS: Change #22c55e (ON) and #ef4444 (OFF)
                    ]]]
        grid_options:
          columns: full
    column_span: 1
  - type: grid
    cards:
      - type: heading
        heading_style: subtitle
        heading: Gateway UDMP
        icon: mdi:wall-fire
        badges:
          - type: entity
            entity: sensor.aa_gw_udmp_se_uptime
          - type: entity
            entity: device_tracker.aa_gw_udmp_se
            color: green
      - type: custom:gauge-card-pro
        entity: sensor.cloudflare_speed_test_latency
        min: 0
        max: 150
        needle: true
        gradient: true
        animation:
          speed: 800
          ease: ease-out
        segments:
          - from: 0
            color: "#00C851"
          - from: 20
            color: "#ffbb33"
          - from: 50
            color: "#FF8800"
          - from: 80
            color: "#ff4444"
        gradient_resolution: high
        needle_color: "#ffffff"
        needle_shadow: true
        titles:
          primary: >-
            Internet Latency: {{ states('sensor.cloudflare_speed_test_latency')
            }}ms
          secondary: "Jitter: {{ states('sensor.cloudflare_speed_test_jitter') }}ms"
        inner:
          entity: sensor.cloudflare_speed_test_jitter
          min: 0
          max: 30
          mode: on_main
          needle: true
          gradient: true
          needle_color: "#ff6b6b"
          segments:
            - from: 0
              color: "#00C851"
            - from: 5
              color: "#ffbb33"
            - from: 15
              color: "#FF8800"
            - from: 25
              color: "#ff4444"
        icon:
          show: true
          icon: mdi:speedometer
          color: "#ffffff"
          size: 20
        style: |
          ha-card {
            background: linear-gradient(135deg, 
              rgba(25, 25, 112, 0.8) 0%,
              rgba(72, 61, 139, 0.8) 50%,
              rgba(123, 104, 238, 0.8) 100%);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 
              0 8px 32px rgba(31, 38, 135, 0.37),
              inset 0 2px 4px rgba(255,255,255,0.1);
            padding: 24px;
          }
      - type: horizontal-stack
        cards:
          - type: gauge
            entity: sensor.isp_download_mbps
            name: Download
            min: 0
            max: 3500
            needle: true
            segments:
              - from: 0
                color: "#FF4444"
              - from: 200
                color: "#FFC107"
              - from: 500
                color: "#69BE28"
            theme: Frosted Glass Dark Lite
            card_mod:
              style: |
                ha-card {
                  {% set speed = states('sensor.isp_download_mbps') | float(0) %}
                  {% if speed > 500 %}
                    background: linear-gradient(135deg, 
                      rgba(105, 190, 40, 0.7) 0%,
                      rgba(0, 34, 68, 0.7) 100%) !important;
                  {% elif speed > 200 %}
                    background: linear-gradient(135deg, 
                      rgba(255, 193, 7, 0.7) 0%,
                      rgba(0, 34, 68, 0.7) 100%) !important;
                  {% else %}
                    background: linear-gradient(135deg, 
                      rgba(244, 67, 54, 0.7) 0%,
                      rgba(0, 34, 68, 0.7) 100%) !important;
                  {% endif %}
                  backdrop-filter: blur(20px) saturate(180%);
                  -webkit-backdrop-filter: blur(20px) saturate(180%);
                  border-radius: 20px;
                  border: 1px solid rgba(105, 190, 40, 0.3);
                  box-shadow: 
                    0 8px 32px rgba(0, 34, 68, 0.5),
                    inset 0 2px 4px rgba(255,255,255,0.1);
                  padding: 16px;
                }
          - type: gauge
            entity: sensor.isp_upload_mbps
            name: Upload
            min: 0
            max: 400
            needle: true
            segments:
              - from: 0
                color: "#FF4444"
              - from: 50
                color: "#FFC107"
              - from: 100
                color: "#69BE28"
            theme: Frosted Glass Dark Lite
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(135deg, 
                    rgba(0, 34, 68, 0.7) 0%,
                    rgba(105, 190, 40, 0.7) 100%) !important;
                  backdrop-filter: blur(20px) saturate(180%);
                  -webkit-backdrop-filter: blur(20px) saturate(180%);
                  border-radius: 20px;
                  border: 1px solid rgba(0, 34, 68, 0.3);
                  box-shadow: 
                    0 8px 32px rgba(0, 34, 68, 0.5),
                    inset 0 2px 4px rgba(255,255,255,0.1);
                  padding: 16px;
                }
      - type: custom:mini-graph-card
        name: Latency – 24h (Cloudflare)
        hours_to_show: 24
        points_per_hour: 1
        show:
          points: true
          fill: fade
          extrema: true
        line_width: 2
        entities:
          - entity: sensor.aa_gw_udmp_se_cloudflare_wan_latency
            name: WAN1
          - entity: sensor.aa_gw_udmp_se_cloudflare_wan2_latency
            name: WAN2
    column_span: 1
  - type: grid
    cards:
      - type: heading
        heading: Network Status & Controls
        heading_style: subtitle
        icon: mdi:lightning-bolt
        badges:
          - type: entity
            entity: binary_sensor.73_109_80_161
            display_type: complete
      - type: history-graph
        title: Latency History
        hours_to_show: 72
        entities:
          - entity: sensor.cloudflare_speed_test_latency
            name: Latency
          - entity: sensor.cloudflare_speed_test_jitter
        logarithmic_scale: false
        card_mod:
          style: |
            ha-card {
              height: 380px !important;  /* Add this line */
              background: linear-gradient(135deg,
                rgba(105, 190, 40, 0.35) 0%,
                rgba(0, 34, 68, 0.35) 100%) !important;
              backdrop-filter: blur(20px) saturate(180%);
              -webkit-backdrop-filter: blur(20px) saturate(180%);
              border-radius: 20px;
              border: 1px solid rgba(105, 190, 40, 0.4) !important;
              box-shadow: 
                0 8px 32px rgba(105, 190, 40, 0.3),
                0 8px 32px rgba(0, 34, 68, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
            }
      - type: custom:stack-in-card
        mode: vertical
        cards:
          - type: entities
            title: 📊 Connection Metrics
            entities:
              - entity: sensor.isp_download_mbps
                name: ⬇️ Download
                icon: mdi:download
              - entity: sensor.isp_upload_mbps
                name: ⬆️ Upload
                icon: mdi:upload
              - entity: sensor.isp_avg_latency
                name: ⏱️ Latency
                icon: mdi:timer-outline
              - entity: sensor.isp_packet_loss
                name: 📦 Packet Loss
                icon: mdi:package-variant-closed-remove
              - entity: sensor.isp_uptime
                name: 📈 Uptime
                icon: mdi:server-network
        card_mod:
          style: |
            ha-card {
              background: rgba(0, 34, 68, 0.3) !important;
              backdrop-filter: blur(20px) saturate(180%);
              -webkit-backdrop-filter: blur(20px) saturate(180%);
              border-radius: 20px;
              border: 1px solid rgba(105, 190, 40, 0.25);
              box-shadow: 
                0 8px 32px rgba(0, 34, 68, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            }
      - type: custom:apexcharts-card
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102, 204, 0.3) 100%) !important;
              backdrop-filter: blur(30px) saturate(180%);
              -webkit-backdrop-filter: blur(30px) saturate(180%);
              border-radius: 20px !important;
              border: 1.5px solid rgba(105, 190, 40, 0.5) !important;
              box-shadow: 0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
              color: #E8F0F5 !important;
              padding: 14px !important;
            }
            ha-card .header {
              color: white !important;
              font-size: 22px !important;
              font-weight: bold !important;
              text-shadow: 0px 0px 8px rgba(0,0,0,0.6) !important;
              padding-bottom: 10px !important;
            }
            ha-card .apexcharts-text {
              fill: #E8F0F5 !important;
            }
            ha-card .apexcharts-legend-text {
              color: #E8F0F5 !important;
            }
        experimental:
          color_threshold: true
        graph_span: 12h
        span:
          start: day
        all_series_config:
          stroke_width: 3
          curve: smooth
        header:
          show: true
          title: 🛡️ AdGuard DNS Protection
          show_states: true
          colorize_states: true
        apex_config:
          chart:
            background: transparent
            fontFamily: inherit
            toolbar:
              show: true
              tools:
                download: false
                selection: true
                zoom: true
                zoomin: true
                zoomout: true
                pan: true
                reset: true
          theme:
            mode: dark
          grid:
            borderColor: rgba(255, 255, 255, 0.1)
            strokeDashArray: 4
            xaxis:
              lines:
                show: true
            yaxis:
              lines:
                show: true
          dataLabels:
            enabled: false
          markers:
            size: 0
            hover:
              size: 6
              sizeOffset: 3
          tooltip:
            enabled: true
            shared: true
            intersect: false
            theme: dark
            style:
              fontSize: 14px
            x:
              format: HH:mm
            "y":
              formatter: |
                EVAL:function(value, { seriesIndex, dataPointIndex, w }) {
                  if (seriesIndex === 2) {
                    return value.toFixed(2) + ' ms';
                  }
                  return Math.round(value);
                }
          xaxis:
            type: datetime
            labels:
              style:
                colors: "#E8F0F5"
                fontSize: 12px
              datetimeFormatter:
                hour: HH:mm
                minute: HH:mm
            tooltip:
              enabled: false
          legend:
            show: true
            position: bottom
            fontSize: 14px
            fontWeight: 600
            labels:
              colors: "#E8F0F5"
            markers:
              width: 12
              height: 12
              radius: 3
          stroke:
            curve: smooth
            width:
              - 0
              - 3
              - 2
          fill:
            type:
              - solid
              - gradient
              - solid
            gradient:
              shade: dark
              type: vertical
              shadeIntensity: 0.5
              gradientToColors:
                - "#FF5252"
              opacityFrom: 0.6
              opacityTo: 0.1
              stops:
                - 0
                - 100
        series:
          - entity: sensor.adguard_home_dns_queries
            name: Total Queries
            type: column
            opacity: 0.25
            color: "#00D4FF"
            stroke_width: 0
            yaxis_id: queries
            group_by:
              func: sum
              duration: 30min
            show:
              legend_value: true
              in_header: true
              extremas: true
          - entity: sensor.adguard_home_dns_queries_blocked
            name: Blocked Queries
            type: area
            color: "#FF5252"
            stroke_width: 3
            yaxis_id: queries
            group_by:
              func: sum
              duration: 30min
            show:
              legend_value: true
              in_header: true
              extremas: true
          - entity: sensor.adguard_home_average_processing_speed
            name: Avg Speed
            type: line
            color: "#69BE28"
            stroke_width: 2
            yaxis_id: speed
            group_by:
              func: avg
              duration: 30min
            show:
              legend_value: true
              in_header: true
              extremas: true
          - entity: sensor.adguard_home_dns_queries_blocked_ratio
            name: Block Rate
            type: line
            color: "#FFC107"
            stroke_width: 2
            yaxis_id: percent
            group_by:
              func: avg
              duration: 30min
            show:
              legend_value: true
              in_header: true
            unit: "%"
        yaxis:
          - id: queries
            min: 0
            show: true
            apex_config:
              tickAmount: 5
              labels:
                style:
                  colors: "#E8F0F5"
                  fontSize: 13px
                formatter: |
                  EVAL:function(value) {
                    if (value >= 1000) {
                      return (value / 1000).toFixed(1) + 'k';
                    }
                    return Math.round(value);
                  }
          - id: speed
            opposite: true
            min: 0
            show: true
            apex_config:
              tickAmount: 5
              labels:
                style:
                  colors: "#69BE28"
                  fontSize: 13px
                formatter: |
                  EVAL:function(value) {
                    return value.toFixed(1) + 'ms';
                  }
          - id: percent
            opposite: true
            min: 0
            max: 100
            show: false
            apex_config:
              labels:
                style:
                  colors: "#FFC107"
                formatter: |
                  EVAL:function(value) {
                    return value.toFixed(0) + '%';
                  }
      - type: grid
        square: false
        columns: 3
        cards:
          - type: custom:gauge-card-pro
            entity: sensor.system_monitor_processor_use
            min: 0
            max: 100
            use_new_from_segments_style: true
            needle: true
            gradient: true
            gradient_resolution: high
            titles:
              primary: HA CPU
            segments:
              - pos: 0
                color: "#4caf50"
              - pos: 50
                color: "#ffeb3b"
              - pos: 75
                color: "#ff9800"
              - pos: 100
                color: "#f44336"
          - type: custom:gauge-card-pro
            entity: sensor.system_monitor_memory_usage
            min: 0
            max: 100
            use_new_from_segments_style: true
            needle: true
            gradient: true
            gradient_resolution: high
            titles:
              primary: HA Memory
            segments:
              - pos: 0
                color: "#4caf50"
              - pos: 50
                color: "#ffeb3b"
              - pos: 75
                color: "#ff9800"
              - pos: 100
                color: "#f44336"
          - type: custom:gauge-card-pro
            entity: sensor.system_monitor_disk_usage
            min: 0
            max: 100
            use_new_from_segments_style: true
            needle: true
            gradient: true
            gradient_resolution: high
            titles:
              primary: HA Disk
            segments:
              - pos: 0
                color: "#4caf50"
              - pos: 50
                color: "#ffeb3b"
              - pos: 75
                color: "#ff9800"
              - pos: 100
                color: "#f44336"
    column_span: 3
  - type: grid
    cards:
      - type: custom:button-card
        variables:
          tile_h: 290
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 4
          name_offset_y: -6
          restart_gap_px: 30
        entity: sensor.aa_gw_udmp_se_aa_gw_udmp_se_cpu_temperature
        name: UDMP-SE
        icon: mdi:router-network
        show_state: false
        tap_action:
          action: more-info
          entity: update.aa_gw_udmp_se
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.aa_gw_udmp_se_restart
          confirmation:
            text: Restart UDMP-SE now?
        triggers_update:
          - sensor.aa_gw_udmp_se_aa_gw_udmp_se_cpu_temperature
          - sensor.aa_gw_udmp_se_aa_gw_udmp_se_phy_temperature
          - sensor.aa_gw_udmp_se_cpu_utilization
          - sensor.aa_gw_udmp_se_memory_utilization
          - sensor.aa_gw_udmp_se_cloudflare_wan_latency
          - sensor.aa_gw_udmp_se_google_wan_latency
          - sensor.aa_gw_udmp_se_microsoft_wan_latency
          - sensor.aa_gw_udmp_se_uptime
          - sensor.aa_gw_udmp_se_state
          - update.aa_gw_udmp_se
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.aa_gw_udmp_se_state']?.state ||
                '').toLowerCase(); return (s === 'connected' || s === 'online'
                || s === 'up') ? 'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82,
                0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.aa_gw_udmp_se_state']?.state ||
                '').toLowerCase(); const cf =
                Number(states['sensor.aa_gw_udmp_se_cloudflare_wan_latency']?.state);
                const gg =
                Number(states['sensor.aa_gw_udmp_se_google_wan_latency']?.state);
                const ms =
                Number(states['sensor.aa_gw_udmp_se_microsoft_wan_latency']?.state);
                const bad = [cf, gg, ms].filter(x => !isNaN(x)).some(x => x >
                60); if ((s && s !== 'connected') || bad) return 'blink 1s
                infinite'; return 'none'; ]]]
          grid:
            - grid-template-areas: >-
                'i temp' 'n n' 'status status' 'perf perf' 'wan wan' 'uptime
                update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const t = Number(entity.state); if (isNaN(t)) return
                '#E8F0F5'; if (t < 70) return '#69BE28'; if (t < 85) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            temp:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            wan:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          temp: >-
            [[[ const cpuT =
            states['sensor.aa_gw_udmp_se_aa_gw_udmp_se_cpu_temperature']?.state;
            const phyT =
            states['sensor.aa_gw_udmp_se_aa_gw_udmp_se_phy_temperature']?.state;
            const c = (v)=> isNaN(Number(v)) ? '-' :
            `${Number(v).toFixed(0)}°C`; return `<div
            style="display:flex;gap:6px;align-items:center;"><span><ha-icon
            icon="mdi:thermometer"
            style="width:14px;height:14px;color:#FFC107;"></ha-icon><span
            style="font-size:14px;">${c(cpuT)}</span></span><span><ha-icon
            icon="mdi:thermometer-lines"
            style="width:14px;height:14px;color:#FFC107;"></ha-icon><span
            style="font-size:14px;">${c(phyT)}</span></span></div>`; ]]]
          status: >-
            [[[ const s = (states['sensor.aa_gw_udmp_se_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.aa_gw_udmp_se_cpu_utilization']?.state; const mem =
            states['sensor.aa_gw_udmp_se_memory_utilization']?.state; const
            cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          wan: >-
            [[[ const cf =
            Number(states['sensor.aa_gw_udmp_se_cloudflare_wan_latency']?.state);
            const gg =
            Number(states['sensor.aa_gw_udmp_se_google_wan_latency']?.state);
            const ms =
            Number(states['sensor.aa_gw_udmp_se_microsoft_wan_latency']?.state);
            const c = (x)=> isNaN(x) ? '-' : `${x.toFixed(0)} ms`; const col =
            (x)=>{ if (isNaN(x)) return 'var(--primary-text-color)'; if (x > 60)
            return '#FF5252'; if (x > 30) return '#FFC107'; return '#69BE28'; };
            return `<div style="display:grid;grid-template-columns: 1fr 1fr
            1fr;gap:6px;font-size:14px;"><span title="Cloudflare"><ha-icon
            icon="mdi:cloud"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="color:${col(cf)};">${c(cf)}</span></span><span
            title="Google"><ha-icon icon="mdi:google"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="color:${col(gg)};">${c(gg)}</span></span><span
            title="Microsoft"><ha-icon icon="mdi:microsoft"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="color:${col(ms)};">${c(ms)}</span></span></div>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.aa_gw_udmp_se_uptime']?.state || '-';
            return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.aa_gw_udmp_se']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts = states['button.aa_gw_udmp_se_restart']?.last_changed;
            const when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 290
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
          poe_budget_w: 500
        entity: sensor.ac_sw_core_temperature
        name: Core Switch
        icon: mdi:server
        show_state: false
        tap_action:
          action: more-info
          entity: update.ac_sw_core
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.ac_sw_core_restart
          confirmation:
            text: Restart ac_sw_core now?
        triggers_update:
          - sensor.ac_sw_core_temperature
          - sensor.ac_sw_core_cpu_utilization
          - sensor.ac_sw_core_memory_utilization
          - sensor.ac_sw_core_clients
          - sensor.ac_sw_core_state
          - sensor.ac_sw_core_uptime
          - update.ac_sw_core
          - sensor.ac_sw_core_port_1_poe_power
          - sensor.ac_sw_core_port_2_poe_power
          - sensor.ac_sw_core_port_3_poe_power
          - sensor.ac_sw_core_port_4_poe_power
          - sensor.ac_sw_core_port_5_poe_power
          - sensor.ac_sw_core_port_6_poe_power
          - sensor.ac_sw_core_port_7_poe_power
          - sensor.ac_sw_core_port_8_poe_power
          - sensor.ac_sw_core_port_9_poe_power
          - sensor.ac_sw_core_port_10_poe_power
          - sensor.ac_sw_core_port_11_poe_power
          - sensor.ac_sw_core_port_12_poe_power
          - sensor.ac_sw_core_port_13_poe_power
          - sensor.ac_sw_core_port_14_poe_power
          - sensor.ac_sw_core_port_15_poe_power
          - sensor.ac_sw_core_port_16_poe_power
          - sensor.ac_sw_core_port_17_poe_power
          - sensor.ac_sw_core_port_18_poe_power
          - sensor.ac_sw_core_port_19_poe_power
          - sensor.ac_sw_core_port_20_poe_power
          - sensor.ac_sw_core_port_21_poe_power
          - sensor.ac_sw_core_port_22_poe_power
          - sensor.ac_sw_core_port_23_poe_power
          - sensor.ac_sw_core_port_24_poe_power
          - sensor.ac_sw_core_port_25_poe_power
          - sensor.ac_sw_core_port_26_poe_power
          - sensor.ac_sw_core_port_27_poe_power
          - sensor.ac_sw_core_port_28_poe_power
          - sensor.ac_sw_core_port_29_poe_power
          - sensor.ac_sw_core_port_30_poe_power
          - sensor.ac_sw_core_port_31_poe_power
          - sensor.ac_sw_core_port_32_poe_power
          - sensor.ac_sw_core_port_33_poe_power
          - sensor.ac_sw_core_port_34_poe_power
          - sensor.ac_sw_core_port_35_poe_power
          - sensor.ac_sw_core_port_36_poe_power
          - sensor.ac_sw_core_port_37_poe_power
          - sensor.ac_sw_core_port_38_poe_power
          - sensor.ac_sw_core_port_39_poe_power
          - sensor.ac_sw_core_port_40_poe_power
          - sensor.ac_sw_core_port_41_poe_power
          - sensor.ac_sw_core_port_42_poe_power
          - sensor.ac_sw_core_port_43_poe_power
          - sensor.ac_sw_core_port_44_poe_power
          - sensor.ac_sw_core_port_45_poe_power
          - sensor.ac_sw_core_port_46_poe_power
          - sensor.ac_sw_core_port_47_poe_power
          - sensor.ac_sw_core_port_48_poe_power
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.ac_sw_core_state']?.state || '').toLowerCase();
                let used = 0; for (let i = 1; i <= 48; i++) { const v =
                parseFloat(states[`sensor.ac_sw_core_port_${i}_poe_power`]?.state);
                if (!isNaN(v)) used += v; } const budget =
                parseFloat(variables.poe_budget_w); const over = budget > 0 &&
                used > budget * 0.9; return ((s === 'connected' || s ===
                'online' || s === 'up') && !over) ? 'rgba(105, 190, 40, 0.5)' :
                'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.ac_sw_core_state']?.state ||
                '').toLowerCase(); let used = 0; for (let i = 1; i <= 48; i++) {
                const v =
                parseFloat(states[`sensor.ac_sw_core_port_${i}_poe_power`]?.state);
                if (!isNaN(v)) used += v; } const budget =
                parseFloat(variables.poe_budget_w); const over = budget > 0 &&
                used > budget * 0.9; if ((s && s !== 'connected') || over)
                return 'blink 1s infinite'; return 'none'; ]]]
          grid:
            - grid-template-areas: >-
                'i temp' 'n n' 'status status' 'perf perf' 'clients clients'
                'poe poe' 'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const t = Number(entity.state); if (isNaN(t)) return
                '#E8F0F5'; if (t < 70) return '#69BE28'; if (t < 85) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            temp:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            poe:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          temp: >-
            [[[ const temp = states['sensor.ac_sw_core_temperature']?.state;
            const c = v => isNaN(Number(v)) ? '-' : `${Number(v).toFixed(0)}°C`;
            return `<ha-icon icon="mdi:thermometer"
            style="width:14px;height:14px;color:#FFC107;"></ha-icon><span
            style="font-size:14px;">${c(temp)}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.ac_sw_core_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu = states['sensor.ac_sw_core_cpu_utilization']?.state;
            const mem = states['sensor.ac_sw_core_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v = states['sensor.ac_sw_core_clients']?.state; const val
            = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return `<ha-icon
            icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          poe: >-
            [[[ let used = 0; for (let i = 1; i <= 48; i++) { const v =
            parseFloat(states[`sensor.ac_sw_core_port_${i}_poe_power`]?.state);
            if (!isNaN(v)) used += v; } const budget =
            parseFloat(variables.poe_budget_w); const colour = (budget > 0 &&
            used > budget * 0.9) ? '#FF5252' : ((budget > 0 && used > budget *
            0.75) ? '#FFC107' : '#69BE28'); return `<ha-icon icon="mdi:flash"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">PoE: <span
            style="color:${colour};font-weight:600;">${used.toFixed(1)}W /
            ${budget}W</span></span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.ac_sw_core_uptime']?.state || '-';
            return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.ac_sw_core']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts = states['button.ac_sw_core_restart']?.last_changed;
            const when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 290
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -20
          restart_gap_px: -3
          poe_budget_w: 60
        entity: sensor.ad_sw_flex_2_5_desk_cpu_utilization
        name: Flex 2.5 Desk
        icon: mdi:switch
        show_state: false
        tap_action:
          action: more-info
          entity: update.ad_sw_flex_2_5_desk
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.ad_sw_flex_2_5_desk_restart
          confirmation:
            text: Restart Flex 2.5 now?
        triggers_update:
          - sensor.ad_sw_flex_2_5_desk_cpu_utilization
          - sensor.ad_sw_flex_2_5_desk_memory_utilization
          - sensor.ad_sw_flex_2_5_desk_clients
          - sensor.ad_sw_flex_2_5_desk_state
          - sensor.ad_sw_flex_2_5_desk_uplink_mac
          - sensor.ad_sw_flex_2_5_desk_uptime
          - update.ad_sw_flex_2_5_desk
          - sensor.ad_sw_flex_2_5_desk_port_1_poe_power
          - sensor.ad_sw_flex_2_5_desk_port_2_poe_power
          - sensor.ad_sw_flex_2_5_desk_port_3_poe_power
          - sensor.ad_sw_flex_2_5_desk_port_4_poe_power
          - sensor.ad_sw_flex_2_5_desk_port_5_poe_power
          - sensor.ad_sw_flex_2_5_desk_port_6_poe_power
          - sensor.ad_sw_flex_2_5_desk_port_7_poe_power
          - sensor.ad_sw_flex_2_5_desk_port_8_poe_power
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.ad_sw_flex_2_5_desk_state']?.state ||
                '').toLowerCase(); let used = 0; for (let i = 1; i <= 8; i++) {
                const v =
                parseFloat(states[`sensor.ad_sw_flex_2_5_desk_port_${i}_poe_power`]?.state);
                if (!isNaN(v)) used += v; } const budget =
                parseFloat(variables.poe_budget_w); const over = budget > 0 &&
                used > budget * 0.9; return ((s === 'connected' || s ===
                'online' || s === 'up') && !over) ? 'rgba(105, 190, 40, 0.5)' :
                'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.ad_sw_flex_2_5_desk_state']?.state
                || '').toLowerCase(); let used = 0; for (let i = 1; i <= 8; i++)
                { const v =
                parseFloat(states[`sensor.ad_sw_flex_2_5_desk_port_${i}_poe_power`]?.state);
                if (!isNaN(v)) used += v; } const budget =
                parseFloat(variables.poe_budget_w); const over = budget > 0 &&
                used > budget * 0.9; if ((s && s !== 'connected') || over)
                return 'blink 1s infinite'; return 'none'; ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients' 'poe
                poe' 'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            poe:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac =
            states['sensor.ad_sw_flex_2_5_desk_uplink_mac']?.state || '-';
            return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.ad_sw_flex_2_5_desk_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.ad_sw_flex_2_5_desk_cpu_utilization']?.state; const
            mem =
            states['sensor.ad_sw_flex_2_5_desk_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v = states['sensor.ad_sw_flex_2_5_desk_clients']?.state;
            const val = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return
            `<ha-icon icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          poe: >-
            [[[ let used = 0; for (let i = 1; i <= 8; i++) { const v =
            parseFloat(states[`sensor.ad_sw_flex_2_5_desk_port_${i}_poe_power`]?.state);
            if (!isNaN(v)) used += v; } const budget =
            parseFloat(variables.poe_budget_w); const colour = (budget > 0 &&
            used > budget * 0.9) ? '#FF5252' : ((budget > 0 && used > budget *
            0.75) ? '#FFC107' : '#69BE28'); return `<ha-icon icon="mdi:flash"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">PoE: <span
            style="color:${colour};font-weight:600;">${used.toFixed(1)}W /
            ${budget}W</span></span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.ad_sw_flex_2_5_desk_uptime']?.state ||
            '-'; return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.ad_sw_flex_2_5_desk']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.ad_sw_flex_2_5_desk_restart']?.last_changed; const
            when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 290
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -15
          restart_gap_px: 9
          poe_budget_w: 60
        entity: sensor.ae_sw_officeprinter_poe_4_cpu_utilization
        name: Office Printer Switch
        icon: mdi:switch
        show_state: false
        tap_action:
          action: more-info
          entity: update.ae_sw_officeprinter_poe_4
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.ae_sw_officeprinter_poe_4_restart
          confirmation:
            text: Restart Office Printer PoE 4 now?
        triggers_update:
          - sensor.ae_sw_officeprinter_poe_4_cpu_utilization
          - sensor.ae_sw_officeprinter_poe_4_memory_utilization
          - sensor.ae_sw_officeprinter_poe_4_clients
          - sensor.ae_sw_officeprinter_poe_4_state
          - sensor.ae_sw_officeprinter_poe_4_uplink_mac
          - sensor.ae_sw_officeprinter_poe_4_uptime
          - update.ae_sw_officeprinter_poe_4
          - sensor.ae_sw_officeprinter_poe_4_port_1_poe_power
          - sensor.ae_sw_officeprinter_poe_4_port_2_poe_power
          - sensor.ae_sw_officeprinter_poe_4_port_3_poe_power
          - sensor.ae_sw_officeprinter_poe_4_port_4_poe_power
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.ae_sw_officeprinter_poe_4_state']?.state ||
                '').toLowerCase(); let used = 0; for (let i = 1; i <= 4; i++) {
                const v =
                parseFloat(states[`sensor.ae_sw_officeprinter_poe_4_port_${i}_poe_power`]?.state);
                if (!isNaN(v)) used += v; } const budget =
                parseFloat(variables.poe_budget_w); const over = budget > 0 &&
                used > budget * 0.9; return ((s === 'connected' || s ===
                'online' || s === 'up') && !over) ? 'rgba(105, 190, 40, 0.5)' :
                'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s =
                (states['sensor.ae_sw_officeprinter_poe_4_state']?.state ||
                '').toLowerCase(); let used = 0; for (let i = 1; i <= 4; i++) {
                const v =
                parseFloat(states[`sensor.ae_sw_officeprinter_poe_4_port_${i}_poe_power`]?.state);
                if (!isNaN(v)) used += v; } const budget =
                parseFloat(variables.poe_budget_w); const over = budget > 0 &&
                used > budget * 0.9; if ((s && s !== 'connected') || over)
                return 'blink 1s infinite'; return 'none'; ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients' 'poe
                poe' 'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            poe:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac =
            states['sensor.ae_sw_officeprinter_poe_4_uplink_mac']?.state || '-';
            return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s =
            (states['sensor.ae_sw_officeprinter_poe_4_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.ae_sw_officeprinter_poe_4_cpu_utilization']?.state;
            const mem =
            states['sensor.ae_sw_officeprinter_poe_4_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v =
            states['sensor.ae_sw_officeprinter_poe_4_clients']?.state; const val
            = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return `<ha-icon
            icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          poe: >-
            [[[ let used = 0; for (let i = 1; i <= 4; i++) { const v =
            parseFloat(states[`sensor.ae_sw_officeprinter_poe_4_port_${i}_poe_power`]?.state);
            if (!isNaN(v)) used += v; } const budget =
            parseFloat(variables.poe_budget_w); const colour = (budget > 0 &&
            used > budget * 0.9) ? '#FF5252' : ((budget > 0 && used > budget *
            0.75) ? '#FFC107' : '#69BE28'); return `<ha-icon icon="mdi:flash"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">PoE: <span
            style="color:${colour};font-weight:600;">${used.toFixed(1)}W /
            ${budget}W</span></span>`; ]]]
          uptime: >-
            [[[ const u =
            states['sensor.ae_sw_officeprinter_poe_4_uptime']?.state || '-';
            return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.ae_sw_officeprinter_poe_4']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.ae_sw_officeprinter_poe_4_restart']?.last_changed;
            const when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 290
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.ag_sw_2_5_et_room_cpu_utilization
        name: ET Room Switch
        icon: mdi:switch
        show_state: false
        tap_action:
          action: more-info
          entity: update.ag_sw_2_5_et_room
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.ag_sw_2_5_et_room_restart
          confirmation:
            text: Restart ET Room Switch now?
        triggers_update:
          - sensor.ag_sw_2_5_et_room_cpu_utilization
          - sensor.ag_sw_2_5_et_room_memory_utilization
          - sensor.ag_sw_2_5_et_room_clients
          - sensor.ag_sw_2_5_et_room_state
          - sensor.ag_sw_2_5_et_room_uplink_mac
          - sensor.ag_sw_2_5_et_room_uptime
          - update.ag_sw_2_5_et_room
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.ag_sw_2_5_et_room_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.ag_sw_2_5_et_room_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; return ((s ===
                'connected' || s === 'online' || s === 'up') && !over) ?
                'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.ag_sw_2_5_et_room_state']?.state
                || '').toLowerCase(); const cpu =
                Number(states['sensor.ag_sw_2_5_et_room_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; if ((s && s !==
                'connected') || over) return 'blink 1s infinite'; return 'none';
                ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac = states['sensor.ag_sw_2_5_et_room_uplink_mac']?.state
            || '-'; return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.ag_sw_2_5_et_room_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.ag_sw_2_5_et_room_cpu_utilization']?.state; const mem
            = states['sensor.ag_sw_2_5_et_room_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v = states['sensor.ag_sw_2_5_et_room_clients']?.state;
            const val = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return
            `<ha-icon icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.ag_sw_2_5_et_room_uptime']?.state ||
            '-'; return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.ag_sw_2_5_et_room']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.ag_sw_2_5_et_room_restart']?.last_changed; const when
            = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.ah_sw_bedroomtv_cpu_utilization
        name: Bedroom TV Switch
        icon: mdi:switch
        show_state: false
        tap_action:
          action: more-info
          entity: update.ah_sw_bedroomtv
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.ah_sw_bedroomtv_restart
          confirmation:
            text: Restart Bedroom TV Switch now?
        triggers_update:
          - sensor.ah_sw_bedroomtv_cpu_utilization
          - sensor.ah_sw_bedroomtv_memory_utilization
          - sensor.ah_sw_bedroomtv_clients
          - sensor.ah_sw_bedroomtv_state
          - sensor.ah_sw_bedroomtv_uplink_mac
          - sensor.ah_sw_bedroomtv_uptime
          - update.ah_sw_bedroomtv
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.ah_sw_bedroomtv_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.ah_sw_bedroomtv_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; return ((s ===
                'connected' || s === 'online' || s === 'up') && !over) ?
                'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.ah_sw_bedroomtv_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.ah_sw_bedroomtv_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; if ((s && s !==
                'connected') || over) return 'blink 1s infinite'; return 'none';
                ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac = states['sensor.ah_sw_bedroomtv_uplink_mac']?.state
            || '-'; return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.ah_sw_bedroomtv_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.ah_sw_bedroomtv_cpu_utilization']?.state; const mem =
            states['sensor.ah_sw_bedroomtv_memory_utilization']?.state; const
            cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v = states['sensor.ah_sw_bedroomtv_clients']?.state; const
            val = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return
            `<ha-icon icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.ah_sw_bedroomtv_uptime']?.state || '-';
            return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.ah_sw_bedroomtv']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.ah_sw_bedroomtv_restart']?.last_changed; const when =
            ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.ai_sw_livingroom_poe_4_cpu_utilization
        name: Living-room PoE 4 switch
        icon: mdi:switch
        show_state: false
        tap_action:
          action: more-info
          entity: update.ai_sw_livingroom_poe_4
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.ai_sw_livingroom_poe_4_restart
          confirmation:
            text: Restart Living-room PoE 4 switch now?
        triggers_update:
          - sensor.ai_sw_livingroom_poe_4_cpu_utilization
          - sensor.ai_sw_livingroom_poe_4_memory_utilization
          - sensor.ai_sw_livingroom_poe_4_clients
          - sensor.ai_sw_livingroom_poe_4_state
          - sensor.ai_sw_livingroom_poe_4_uplink_mac
          - sensor.ai_sw_livingroom_poe_4_uptime
          - update.ai_sw_livingroom_poe_4
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.ai_sw_livingroom_poe_4_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.ai_sw_livingroom_poe_4_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; return ((s ===
                'connected' || s === 'online' || s === 'up') && !over) ?
                'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s =
                (states['sensor.ai_sw_livingroom_poe_4_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.ai_sw_livingroom_poe_4_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; if ((s && s !==
                'connected') || over) return 'blink 1s infinite'; return 'none';
                ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac =
            states['sensor.ai_sw_livingroom_poe_4_uplink_mac']?.state || '-';
            return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.ai_sw_livingroom_poe_4_state']?.state
            || '').toUpperCase(); const ok = (s === 'CONNECTED' || s ===
            'ONLINE' || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252';
            const label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.ai_sw_livingroom_poe_4_cpu_utilization']?.state;
            const mem =
            states['sensor.ai_sw_livingroom_poe_4_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v =
            states['sensor.ai_sw_livingroom_poe_4_clients']?.state; const val =
            isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return `<ha-icon
            icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.ai_sw_livingroom_poe_4_uptime']?.state
            || '-'; return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.ai_sw_livingroom_poe_4']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.ai_sw_livingroom_poe_4_restart']?.last_changed; const
            when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.ak_backyard_switch_cpu_utilization
        name: Backyard switch
        icon: mdi:switch
        show_state: false
        tap_action:
          action: more-info
          entity: update.ak_backyard_switch
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.ak_backyard_switch_restart
          confirmation:
            text: Restart Backyard switch now?
        triggers_update:
          - sensor.ak_backyard_switch_cpu_utilization
          - sensor.ak_backyard_switch_memory_utilization
          - sensor.ak_backyard_switch_clients
          - sensor.ak_backyard_switch_state
          - sensor.ak_backyard_switch_uplink_mac
          - sensor.ak_backyard_switch_uptime
          - update.ak_backyard_switch
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.ak_backyard_switch_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.ak_backyard_switch_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; return ((s ===
                'connected' || s === 'online' || s === 'up') && !over) ?
                'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.ak_backyard_switch_state']?.state
                || '').toLowerCase(); const cpu =
                Number(states['sensor.ak_backyard_switch_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; if ((s && s !==
                'connected') || over) return 'blink 1s infinite'; return 'none';
                ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac =
            states['sensor.ak_backyard_switch_uplink_mac']?.state || '-'; return
            `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.ak_backyard_switch_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.ak_backyard_switch_cpu_utilization']?.state; const
            mem = states['sensor.ak_backyard_switch_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v = states['sensor.ak_backyard_switch_clients']?.state;
            const val = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return
            `<ha-icon icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.ak_backyard_switch_uptime']?.state ||
            '-'; return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.ak_backyard_switch']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.ak_backyard_switch_restart']?.last_changed; const
            when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.ba_ap_u7xg_upstairs_cpu_utilization
        name: U7-XG AP (Upstairs)
        icon: mdi:wifi
        show_state: false
        tap_action:
          action: more-info
          entity: update.ba_ap_u7xg_upstairs
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.ba_ap_u7xg_upstairs_restart
          confirmation:
            text: Restart U7-XG AP (Upstairs) now?
        triggers_update:
          - sensor.ba_ap_u7xg_upstairs_cpu_utilization
          - sensor.ba_ap_u7xg_upstairs_memory_utilization
          - sensor.ba_ap_u7xg_upstairs_clients
          - sensor.ba_ap_u7xg_upstairs_state
          - sensor.ba_ap_u7xg_upstairs_uplink_mac
          - sensor.ba_ap_u7xg_upstairs_uptime
          - update.ba_ap_u7xg_upstairs
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.ba_ap_u7xg_upstairs_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.ba_ap_u7xg_upstairs_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; return ((s ===
                'connected' || s === 'online' || s === 'up') && !over) ?
                'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.ba_ap_u7xg_upstairs_state']?.state
                || '').toLowerCase(); const cpu =
                Number(states['sensor.ba_ap_u7xg_upstairs_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; if ((s && s !==
                'connected') || over) return 'blink 1s infinite'; return 'none';
                ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac =
            states['sensor.ba_ap_u7xg_upstairs_uplink_mac']?.state || '-';
            return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.ba_ap_u7xg_upstairs_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.ba_ap_u7xg_upstairs_cpu_utilization']?.state; const
            mem =
            states['sensor.ba_ap_u7xg_upstairs_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v = states['sensor.ba_ap_u7xg_upstairs_clients']?.state;
            const val = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return
            `<ha-icon icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.ba_ap_u7xg_upstairs_uptime']?.state ||
            '-'; return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.ba_ap_u7xg_upstairs']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.ba_ap_u7xg_upstairs_restart']?.last_changed; const
            when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.bb_ap_u6lr_frontroom_cpu_utilization
        name: U6-LR AP (Front room)
        icon: mdi:wifi
        show_state: false
        tap_action:
          action: more-info
          entity: update.bb_ap_u6lr_frontroom
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.bb_ap_u6lr_frontroom_restart
          confirmation:
            text: Restart U6-LR AP (Front room) now?
        triggers_update:
          - sensor.bb_ap_u6lr_frontroom_cpu_utilization
          - sensor.bb_ap_u6lr_frontroom_memory_utilization
          - sensor.bb_ap_u6lr_frontroom_clients
          - sensor.bb_ap_u6lr_frontroom_state
          - sensor.bb_ap_u6lr_frontroom_uplink_mac
          - sensor.bb_ap_u6lr_frontroom_uptime
          - update.bb_ap_u6lr_frontroom
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.bb_ap_u6lr_frontroom_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.bb_ap_u6lr_frontroom_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; return ((s ===
                'connected' || s === 'online' || s === 'up') && !over) ?
                'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s =
                (states['sensor.bb_ap_u6lr_frontroom_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.bb_ap_u6lr_frontroom_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; if ((s && s !==
                'connected') || over) return 'blink 1s infinite'; return 'none';
                ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac =
            states['sensor.bb_ap_u6lr_frontroom_uplink_mac']?.state || '-';
            return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.bb_ap_u6lr_frontroom_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.bb_ap_u6lr_frontroom_cpu_utilization']?.state; const
            mem =
            states['sensor.bb_ap_u6lr_frontroom_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v = states['sensor.bb_ap_u6lr_frontroom_clients']?.state;
            const val = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return
            `<ha-icon icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.bb_ap_u6lr_frontroom_uptime']?.state ||
            '-'; return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.bb_ap_u6lr_frontroom']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.bb_ap_u6lr_frontroom_restart']?.last_changed; const
            when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.bc_ap_u6pro_livingroom_cpu_utilization
        name: U6-Pro AP (Living room)
        icon: mdi:wifi
        show_state: false
        tap_action:
          action: more-info
          entity: update.bc_ap_u6pro_livingroom
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.bc_ap_u6pro_livingroom_restart
          confirmation:
            text: Restart U6-Pro AP (Living room) now?
        triggers_update:
          - sensor.bc_ap_u6pro_livingroom_cpu_utilization
          - sensor.bc_ap_u6pro_livingroom_memory_utilization
          - sensor.bc_ap_u6pro_livingroom_clients
          - sensor.bc_ap_u6pro_livingroom_state
          - sensor.bc_ap_u6pro_livingroom_uplink_mac
          - sensor.bc_ap_u6pro_livingroom_uptime
          - update.bc_ap_u6pro_livingroom
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.bc_ap_u6pro_livingroom_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.bc_ap_u6pro_livingroom_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; return ((s ===
                'connected' || s === 'online' || s === 'up') && !over) ?
                'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s =
                (states['sensor.bc_ap_u6pro_livingroom_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.bc_ap_u6pro_livingroom_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; if ((s && s !==
                'connected') || over) return 'blink 1s infinite'; return 'none';
                ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac =
            states['sensor.bc_ap_u6pro_livingroom_uplink_mac']?.state || '-';
            return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.bc_ap_u6pro_livingroom_state']?.state
            || '').toUpperCase(); const ok = (s === 'CONNECTED' || s ===
            'ONLINE' || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252';
            const label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu =
            states['sensor.bc_ap_u6pro_livingroom_cpu_utilization']?.state;
            const mem =
            states['sensor.bc_ap_u6pro_livingroom_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v =
            states['sensor.bc_ap_u6pro_livingroom_clients']?.state; const val =
            isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return `<ha-icon
            icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.bc_ap_u6pro_livingroom_uptime']?.state
            || '-'; return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.bc_ap_u6pro_livingroom']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts =
            states['button.bc_ap_u6pro_livingroom_restart']?.last_changed; const
            when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.be_ap_u6_cpu_utilization
        name: U6 AP
        icon: mdi:wifi
        show_state: false
        tap_action:
          action: more-info
          entity: update.be_ap_u6
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.be_ap_u6_restart
          confirmation:
            text: Restart U6 AP now?
        triggers_update:
          - sensor.be_ap_u6_cpu_utilization
          - sensor.be_ap_u6_memory_utilization
          - sensor.be_ap_u6_clients
          - sensor.be_ap_u6_state
          - sensor.be_ap_u6_uplink_mac
          - sensor.be_ap_u6_uptime
          - update.be_ap_u6
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.be_ap_u6_state']?.state || '').toLowerCase();
                const cpu =
                Number(states['sensor.be_ap_u6_cpu_utilization']?.state); const
                over = !isNaN(cpu) && cpu >= 90; return ((s === 'connected' || s
                === 'online' || s === 'up') && !over) ? 'rgba(105, 190, 40,
                0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.be_ap_u6_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.be_ap_u6_cpu_utilization']?.state); const
                over = !isNaN(cpu) && cpu >= 90; if ((s && s !== 'connected') ||
                over) return 'blink 1s infinite'; return 'none'; ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'clients clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac = states['sensor.be_ap_u6_uplink_mac']?.state || '-';
            return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.be_ap_u6_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu = states['sensor.be_ap_u6_cpu_utilization']?.state;
            const mem = states['sensor.be_ap_u6_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          clients: >-
            [[[ const v = states['sensor.be_ap_u6_clients']?.state; const val =
            isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return `<ha-icon
            icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.be_ap_u6_uptime']?.state || '-'; return
            `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.be_ap_u6']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts = states['button.be_ap_u6_restart']?.last_changed;
            const when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 15
          name_offset_y: 15
          restart_gap_px: 9
        entity: sensor.usw_ultra_60w_clients
        name: USW Ultra 60 W switch
        icon: mdi:switch
        show_state: false
        tap_action:
          action: more-info
          entity: update.usw_ultra_60w
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.usw_ultra_60w_restart
          confirmation:
            text: Restart USW Ultra 60 W switch now?
        triggers_update:
          - sensor.usw_ultra_60w_clients
          - sensor.usw_ultra_60w_state
          - sensor.usw_ultra_60w_uplink_mac
          - sensor.usw_ultra_60w_uptime
          - update.usw_ultra_60w
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.usw_ultra_60w_state']?.state ||
                '').toLowerCase(); return (s === 'connected' || s === 'online'
                || s === 'up') ? 'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82,
                0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.usw_ultra_60w_state']?.state ||
                '').toLowerCase(); if (s && s !== 'connected') return 'blink 3s
                infinite'; return 'none'; ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'clients clients' 'uptime update'
                'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const s = (states['sensor.usw_ultra_60w_state']?.state ||
                '').toLowerCase(); return (s === 'connected') ? '#69BE28' :
                '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            clients:
              - align-self: middle
              - justify-self: start
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac = states['sensor.usw_ultra_60w_uplink_mac']?.state ||
            '-'; return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.usw_ultra_60w_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          clients: >-
            [[[ const v = states['sensor.usw_ultra_60w_clients']?.state; const
            val = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return
            `<ha-icon icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.usw_ultra_60w_uptime']?.state || '-';
            return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.usw_ultra_60w']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts = states['button.usw_ultra_60w_restart']?.last_changed;
            const when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 270
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -5
          restart_gap_px: 9
        entity: sensor.zz_pwr_pdu_cpu_utilization
        name: UniFi PDU
        icon: mdi:power-socket
        show_state: false
        tap_action:
          action: more-info
          entity: update.zz_pwr_pdu
        hold_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.zz_pwr_pdu_restart
          confirmation:
            text: Restart UniFi power-distribution unit now?
        triggers_update:
          - sensor.zz_pwr_pdu_cpu_utilization
          - sensor.zz_pwr_pdu_memory_utilization
          - sensor.zz_pwr_pdu_clients
          - sensor.zz_pwr_pdu_state
          - sensor.zz_pwr_pdu_uplink_mac
          - sensor.zz_pwr_pdu_uptime
          - sensor.zz_pwr_pdu_ac_power_consumption
          - sensor.zz_pwr_pdu_ac_power_budget
          - update.zz_pwr_pdu
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(0, 34, 68, 0.5) 0%, rgba(0, 102,
                204, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const s =
                (states['sensor.zz_pwr_pdu_state']?.state || '').toLowerCase();
                const cpu =
                Number(states['sensor.zz_pwr_pdu_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; return ((s ===
                'connected' || s === 'online' || s === 'up') && !over) ?
                'rgba(105, 190, 40, 0.5)' : 'rgba(255, 82, 82, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(0, 34, 68, 0.4), 0 16px 64px rgba(0, 102, 204,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const s = (states['sensor.zz_pwr_pdu_state']?.state ||
                '').toLowerCase(); const cpu =
                Number(states['sensor.zz_pwr_pdu_cpu_utilization']?.state);
                const over = !isNaN(cpu) && cpu >= 90; if ((s && s !==
                'connected') || over) return 'blink 2s infinite'; return 'none';
                ]]]
          grid:
            - grid-template-areas: >-
                'i mac' 'n n' 'status status' 'perf perf' 'power clients'
                'uptime update' 'restart restart'
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: >-
                min-content min-content min-content min-content min-content
                min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const v = Number(entity.state); if (isNaN(v)) return
                '#E8F0F5'; if (v < 60) return '#69BE28'; if (v < 80) return
                '#FFC107'; return '#FF5252'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - margin-top: "-10%"
            - filter: drop-shadow(0 0 12px rgba(105, 190, 40, 0.4))
          custom_fields:
            mac:
              - align-self: start
              - justify-self: end
            status:
              - align-self: center
              - justify-self: start
            perf:
              - align-self: center
              - justify-self: stretch
              - padding: 8px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
              - margin: 0 2px
            power:
              - align-self: middle
              - justify-self: start
            clients:
              - align-self: middle
              - justify-self: end
            uptime:
              - align-self: middle
              - justify-self: start
            update:
              - align-self: middle
              - justify-self: end
            restart:
              - align-self: middle
              - justify-self: center
              - margin-top: "[[[ return variables.restart_gap_px + 'px'; ]]]"
        custom_fields:
          mac: >-
            [[[ const mac = states['sensor.zz_pwr_pdu_uplink_mac']?.state ||
            '-'; return `<ha-icon icon="mdi:ethernet"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">MAC: ${mac}</span>`; ]]]
          status: >-
            [[[ const s = (states['sensor.zz_pwr_pdu_state']?.state ||
            '').toUpperCase(); const ok = (s === 'CONNECTED' || s === 'ONLINE'
            || s === 'UP'); const color = ok ? '#69BE28' : '#FF5252'; const
            label = s || 'UNKNOWN'; return `<span style="padding:4px
            12px;border-radius:12px;background:${ok ? 'rgba(105, 190, 40, 0.2)'
            : 'rgba(255, 82, 82, 0.2)'};border:1px solid ${ok ? 'rgba(105, 190,
            40, 0.4)' : 'rgba(255, 82, 82,
            0.4)'};color:${color};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${label}</span>`;
            ]]]
          perf: >-
            [[[ const cpu = states['sensor.zz_pwr_pdu_cpu_utilization']?.state;
            const mem = states['sensor.zz_pwr_pdu_memory_utilization']?.state;
            const cpuVal = isNaN(Number(cpu)) ? 0 : Number(cpu); const memVal =
            isNaN(Number(mem)) ? 0 : Number(mem); const cpuCol = cpuVal >= 90 ?
            '#FF5252' : (cpuVal >= 75 ? '#FFC107' : '#69BE28'); const memCol =
            memVal >= 90 ? '#FF5252' : (memVal >= 75 ? '#FFC107' : '#69BE28');
            return `<div
            style="display:flex;flex-direction:column;gap:8px;width:100%;"><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:cpu-64-bit"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">CPU</span></div><span
            style="font-weight:600;font-size:14px;">${cpuVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${cpuVal}%;background:${cpuCol};transition:width
            0.3s ease;"></div></div></div><div><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:memory"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">RAM</span></div><span
            style="font-weight:600;font-size:14px;">${memVal.toFixed(0)}%</span></div><div
            style="height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;"><div
            style="height:100%;width:${memVal}%;background:${memCol};transition:width
            0.3s ease;"></div></div></div></div>`; ]]]
          power: >-
            [[[ const consumption =
            states['sensor.zz_pwr_pdu_ac_power_consumption']?.state; const
            budget = states['sensor.zz_pwr_pdu_ac_power_budget']?.state; const
            consVal = isNaN(Number(consumption)) ? '-' :
            `${Number(consumption).toFixed(0)}W`; const budgetVal =
            isNaN(Number(budget)) ? '-' : `${Number(budget).toFixed(0)}W`; const
            percent = (!isNaN(Number(consumption)) && !isNaN(Number(budget))) ?
            `${((Number(consumption) / Number(budget)) * 100).toFixed(0)}%` :
            '-'; const col = (!isNaN(Number(consumption)) &&
            !isNaN(Number(budget))) ? ((Number(consumption) / Number(budget)) >=
            0.9 ? '#FF5252' : ((Number(consumption) / Number(budget)) >= 0.75 ?
            '#FFC107' : '#69BE28')) : '#E8F0F5'; return `<ha-icon
            icon="mdi:lightning-bolt"
            style="width:14px;height:14px;color:#FFC107;"></ha-icon><span
            style="font-size:14px;">Power: <span
            style="color:${col};font-weight:600;">${consVal}/${budgetVal}
            (${percent})</span></span>`; ]]]
          clients: >-
            [[[ const v = states['sensor.zz_pwr_pdu_clients']?.state; const val
            = isNaN(Number(v)) ? '-' : Number(v).toFixed(0); return `<ha-icon
            icon="mdi:account-multiple"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Clients: ${val}</span>`; ]]]
          uptime: >-
            [[[ const u = states['sensor.zz_pwr_pdu_uptime']?.state || '-';
            return `<ha-icon icon="mdi:clock-outline"
            style="width:14px;height:14px;color:#00D4FF;"></ha-icon><span
            style="font-size:14px;">Uptime: ${u}</span>`; ]]]
          update: >-
            [[[ const st = (states['update.zz_pwr_pdu']?.state ||
            '').toLowerCase(); const avail = (st === 'on' || st === 'true' || st
            === 'available'); const bg = avail ? 'rgba(255, 82, 82, 0.2)' :
            'rgba(105, 190, 40, 0.15)'; const border = avail ? 'rgba(255, 82,
            82, 0.4)' : 'rgba(105, 190, 40, 0.3)'; const fg = avail ? '#FF5252'
            : '#69BE28'; const txt = avail ? 'Update: Available' : 'Up to date';
            return `<span style="padding:4px
            12px;border-radius:12px;background:${bg};border:1px solid
            ${border};color:${fg};font-weight:600;font-size:14px;backdrop-filter:blur(10px);">${txt}</span>`;
            ]]]
          restart: >-
            [[[ const ts = states['button.zz_pwr_pdu_restart']?.last_changed;
            const when = ts ? new Date(ts).toLocaleString() : ''; return `<div
            style="display:flex;align-items:center;gap:6px;justify-content:center;"><ha-icon
            icon="mdi:restart"
            style="width:14px;height:14px;color:#FF5252;"></ha-icon><span
            style="font-size:13px;">Hold to Restart</span><span
            style="opacity:.6;font-size:11px;">${when ? 'Last: '+when :
            ''}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      - type: custom:button-card
        variables:
          tile_h: 250
          font_px: 15
          name_font_px: 22
          icon_pct: 90
          pad_px: 14
          row_gap_px: 5
          name_offset_y: -6
          restart_gap_px: 9
        entity: sensor.zz_pwr_pdu_ac_power_consumption
        name: PDU Power
        icon: mdi:power-plug-outline
        show_state: false
        tap_action:
          action: more-info
          entity: sensor.zz_pwr_pdu_ac_power_consumption
        hold_action:
          action: none
        triggers_update:
          - sensor.zz_pwr_pdu_ac_power_consumption
          - sensor.zz_pwr_pdu_ac_power_budget
          - switch.zz_pwr_pdu_outlet_5
          - switch.zz_pwr_pdu_outlet_6
          - switch.zz_pwr_pdu_outlet_7
          - switch.zz_pwr_pdu_outlet_8
          - switch.zz_pwr_pdu_outlet_9
          - switch.zz_pwr_pdu_outlet_10
          - switch.zz_pwr_pdu_outlet_11
          - switch.zz_pwr_pdu_outlet_12
          - switch.zz_pwr_pdu_outlet_13
          - switch.zz_pwr_pdu_outlet_14
          - switch.zz_pwr_pdu_outlet_15
          - switch.zz_pwr_pdu_outlet_16
          - switch.zz_pwr_pdu_outlet_17
          - switch.zz_pwr_pdu_outlet_18
          - switch.zz_pwr_pdu_outlet_19
          - switch.zz_pwr_pdu_outlet_20
          - switch.zz_pwr_pdu_usb_outlet_1
          - switch.zz_pwr_pdu_usb_outlet_2
          - switch.zz_pwr_pdu_usb_outlet_3
          - switch.zz_pwr_pdu_usb_outlet_4
        styles:
          card:
            - height: "[[[ return variables.tile_h + 'px'; ]]]"
            - padding: "[[[ return variables.pad_px + 'px'; ]]]"
            - background: >-
                linear-gradient(135deg, rgba(68, 34, 0, 0.5) 0%, rgba(204, 102,
                0, 0.3) 100%)
            - backdrop-filter: blur(30px) saturate(180%)
            - "-webkit-backdrop-filter": blur(30px) saturate(180%)
            - border-radius: 20px
            - border: >-
                1.5px solid [[[ const consumption =
                Number(states['sensor.zz_pwr_pdu_ac_power_consumption']?.state);
                const budget =
                Number(states['sensor.zz_pwr_pdu_ac_power_budget']?.state);
                const powerOver = !isNaN(consumption) && !isNaN(budget) &&
                budget > 0 && consumption > budget * 0.9; return powerOver ?
                'rgba(255, 82, 82, 0.5)' : 'rgba(255, 193, 7, 0.5)'; ]]]
            - box-shadow: >-
                0 8px 32px rgba(68, 34, 0, 0.4), 0 16px 64px rgba(204, 102, 0,
                0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15)
            - color: "#E8F0F5"
            - font-size: "[[[ return variables.font_px + 'px'; ]]]"
            - text-shadow: 0px 0px 8px rgba(0,0,0,0.6)
            - text-transform: capitalize
            - transition: all 0.3s ease
            - animation: >-
                [[[ const consumption =
                Number(states['sensor.zz_pwr_pdu_ac_power_consumption']?.state);
                const budget =
                Number(states['sensor.zz_pwr_pdu_ac_power_budget']?.state);
                const powerOver = !isNaN(consumption) && !isNaN(budget) &&
                budget > 0 && consumption > budget * 0.9; if (powerOver) return
                'blink 1s infinite'; return 'none'; ]]]
          grid:
            - grid-template-areas: "'i i' 'n n' 'power power' 'ac usb' 'total total'"
            - grid-template-columns: 1fr 1fr
            - grid-template-rows: min-content min-content min-content min-content min-content
            - row-gap: "[[[ return variables.row_gap_px + 'px'; ]]]"
          name:
            - font-weight: bold
            - font-size: "[[[ return variables.name_font_px + 'px'; ]]]"
            - color: white
            - align-self: start
            - justify-self: start
            - margin-top: "[[[ return variables.name_offset_y + 'px'; ]]]"
            - padding-bottom: 4px
          img_cell:
            - justify-content: start
            - align-items: start
            - margin: none
          icon:
            - color: >-
                [[[ const consumption =
                Number(states['sensor.zz_pwr_pdu_ac_power_consumption']?.state);
                const budget =
                Number(states['sensor.zz_pwr_pdu_ac_power_budget']?.state); if
                (isNaN(consumption) || isNaN(budget)) return '#FFC107'; const
                percent = (consumption / budget) * 100; if (percent >= 90)
                return '#FF5252'; if (percent >= 75) return '#FFC107'; return
                '#69BE28'; ]]]
            - width: "[[[ return variables.icon_pct + '%'; ]]]"
            - filter: drop-shadow(0 0 12px rgba(255, 193, 7, 0.4))
            - margin-top: "-10%"
          custom_fields:
            power:
              - align-self: center
              - justify-self: stretch
              - padding: 12px
              - background: rgba(255, 255, 255, 0.05)
              - border-radius: 12px
            ac:
              - align-self: center
              - justify-self: start
            usb:
              - align-self: center
              - justify-self: end
            total:
              - align-self: center
              - justify-self: center
        custom_fields:
          power: >-
            [[[ const consumption =
            states['sensor.zz_pwr_pdu_ac_power_consumption']?.state; const
            budget = states['sensor.zz_pwr_pdu_ac_power_budget']?.state; const
            consVal = Number(consumption); const budgetVal = Number(budget);
            const percent = (!isNaN(consVal) && !isNaN(budgetVal) && budgetVal >
            0) ? (consVal / budgetVal) * 100 : 0; const col = percent >= 90 ?
            '#FF5252' : (percent >= 75 ? '#FFC107' : '#69BE28'); return `<div
            style="width:100%;"><div
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;"><div
            style="display:flex;align-items:center;gap:6px;"><ha-icon
            icon="mdi:lightning-bolt"
            style="width:16px;height:16px;color:#FFC107;"></ha-icon><span
            style="font-size:14px;font-weight:600;">AC Power</span></div><span
            style="font-size:14px;font-weight:600;color:${col};">${isNaN(consVal)
            ? '-' : consVal.toFixed(0)}W / ${isNaN(budgetVal) ? '-' :
            budgetVal.toFixed(0)}W (${percent.toFixed(0)}%)</span></div><div
            style="height:10px;background:rgba(255,255,255,0.1);border-radius:5px;overflow:hidden;"><div
            style="height:100%;width:${percent}%;background:${col};box-shadow:0
            0 8px ${col}55;transition:width 0.3s ease;"></div></div></div>`; ]]]
          ac: >-
            [[[ let on=0, tot=0; for (let i=5;i<=20;i++){ const
            s=states[`switch.zz_pwr_pdu_outlet_${i}`]?.state; if (s !==
            undefined){ tot++; if (s==='on') on++; }} return `<div
            style="text-align:center;"><ha-icon icon="mdi:power-plug"
            style="width:20px;height:20px;color:#00D4FF;"></ha-icon><div
            style="font-size:11px;opacity:0.7;margin-top:4px;">AC
            Outlets</div><div
            style="font-size:28px;font-weight:700;color:#69BE28;margin-top:4px;line-height:1;">${on}/${tot}</div><div
            style="font-size:10px;opacity:0.6;margin-top:2px;">Active</div></div>`;
            ]]]
          usb: >-
            [[[ let usbOn=0, usbTot=0; for (let i=1;i<=4;i++){ const
            s=states[`switch.zz_pwr_pdu_usb_outlet_${i}`]?.state; if (s !==
            undefined){ usbTot++; if (s==='on') usbOn++; }} return `<div
            style="text-align:center;"><ha-icon icon="mdi:usb"
            style="width:20px;height:20px;color:#00D4FF;"></ha-icon><div
            style="font-size:11px;opacity:0.7;margin-top:4px;">USB
            Ports</div><div
            style="font-size:28px;font-weight:700;color:#69BE28;margin-top:4px;line-height:1;">${usbOn}/${usbTot}</div><div
            style="font-size:10px;opacity:0.6;margin-top:2px;">Active</div></div>`;
            ]]]
          total: >-
            [[[ let acOn=0, acTot=0; for (let i=5;i<=20;i++){ const
            s=states[`switch.zz_pwr_pdu_outlet_${i}`]?.state; if (s !==
            undefined){ acTot++; if (s==='on') acOn++; }} let usbOn=0, usbTot=0;
            for (let i=1;i<=4;i++){ const
            s=states[`switch.zz_pwr_pdu_usb_outlet_${i}`]?.state; if (s !==
            undefined){ usbTot++; if (s==='on') usbOn++; }} const totalOn = acOn
            + usbOn; const totalPorts = acTot + usbTot; return `<div
            style="padding:8px 16px;border-radius:12px;background:rgba(105, 190,
            40, 0.15);border:1px solid rgba(105, 190, 40,
            0.3);backdrop-filter:blur(10px);"><span
            style="font-size:14px;color:#E8F0F5;">Total Active: </span><span
            style="font-size:18px;font-weight:700;color:#69BE28;">${totalOn} /
            ${totalPorts}</span></div>`; ]]]
        card_mod:
          style: |
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    column_span: 5
header:
  card:
    type: markdown
    content: |-
      # Hello {{ user }}
      🚨🚨🚨🚨 Monitor & Control UniFi 🚨🚨🚨🚨
    title: test
    text_only: true
badges:
  - type: entity
    show_name: true
    show_state: false
    show_icon: true
    entity: person.z_ss_home
    name: Sami
    state_content:
      - state
      - device_trackers
    show_entity_picture: true
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: image.salehin_guestnet_qr_code
    name: Guest
    color: accent
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: image.ss_homeiot_qr_code
    color: deep-orange
  - type: entity
    show_name: false
    show_state: false
    show_icon: true
    entity: image.zz_megatron_qr_code
    name: Megatron
    color: red
    show_entity_picture: false
max_columns: 5
top_margin: true
dense_section_placement: true
visible:
  - user: 6b1269bc2b914e3188f180313ee506ac
  - user: 1268f8d2cdbb437b9dc33ef914c402fa
  - user: a4dd6c2979b64023a07c6b98d43ed14f
